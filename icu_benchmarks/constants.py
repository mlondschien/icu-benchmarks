from pathlib import Path

DATA_DIR = Path(__file__).parents[1] / "data"
VARIABLE_REFERENCE_PATH = (
    Path(__file__).parents[1] / "resources" / "variable_reference.tsv"
)


DATASETS = [
    "mimic",
    "ehrshot",
    "miived",
    "miiv",
    "eicu",
    "hirid",
    "aumc",
    "sic",
    "zigong",
    "picdb",
]


OUTCOMES = [
    "remaining_los",
    "mortality_at_24h",
    "los_at_24h",
    "decompensation_at_24h",
    "respiratory_failure_at_24h",
    "circulatory_failure_at_8h",
    "kidney_failure_at_48h",
    "log_creatine_in_1h",
    "log_lactate_in_1h",
]

TASKS = {
    "remaining_los": {
        "task": "regression",
        # outcome distribution
        "family": "gamma",
        # alpha such that fit on train split with l1_ratio=1 is zero. This differs a
        # bit by weighting scheme.
        "alpha_max": 0.6,
        # Total number of samples in all splits
        "n_samples": {
            "mimic": 5433113,
            "ehrshot": 0,
            "miived": 2113875,
            "miiv": 2329887,
            "eicu": 12119416,
            "hirid": 1781843,
            "aumc": 1832148,
            "sic": 1881990,
            "zigong": 392612,
            "picdb": 1651313,
        },
        # Approximate size of the dataset in GB (features + outcome)
        "size": {
            "mimic": 33.3,
            "ehrshot": 0.0,
            "miived": 10.0,
            "miiv": 13.9,
            "eicu": 74.7,
            "hirid": 11.0,
            "aumc": 11.5,
            "sic": 11.0,
            "zigong": 2.4,
            "picdb": 10.4,
        },
    },
    "mortality_at_24h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.07,
        "n_samples": {
            "mimic": 48868,
            "ehrshot": 32890,
            "miived": 11860,
            "miiv": 23675,
            "eicu": 132649,
            "hirid": 16611,
            "aumc": 12762,
            "sic": 19543,
            "zigong": 2460,
            "picdb": 9225,
        },
        "size": {
            "mimic": 0.3,
            "ehrshot": 0.2,
            "miived": 0.1,
            "miiv": 0.1,
            "eicu": 0.9,
            "hirid": 0.1,
            "aumc": 0.1,
            "sic": 0.1,
            "zigong": 0.0,
            "picdb": 0.1,
        },
    },
    "los_at_24h": {
        "task": "regression",
        "family": "gamma",
        "alpha_max": 0.5,
        "n_samples": {
            "mimic": 48868,
            "ehrshot": 0,
            "miived": 11860,
            "miiv": 23675,
            "eicu": 132649,
            "hirid": 16611,
            "aumc": 12762,
            "sic": 19543,
            "zigong": 2460,
            "picdb": 9225,
        },
        "size": {
            "mimic": 0.3,
            "ehrshot": 0.0,
            "miived": 0.1,
            "miiv": 0.1,
            "eicu": 0.9,
            "hirid": 0.1,
            "aumc": 0.1,
            "sic": 0.1,
            "zigong": 0.0,
            "picdb": 0.1,
        },
    },
    "decompensation_at_24h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.025,
        "n_samples": {
            "mimic": 4227266,
            "ehrshot": 3049961,
            "miived": 2113875,
            "miiv": 1729782,
            "eicu": 12119416,
            "hirid": 1105836,
            "aumc": 1832148,
            "sic": 1386615,
            "zigong": 387322,
            "picdb": 1651313,
        },
        "size": {
            "mimic": 25.8,
            "ehrshot": 18.6,
            "miived": 10.0,
            "miiv": 10.3,
            "eicu": 74.7,
            "hirid": 6.9,
            "aumc": 11.5,
            "sic": 8.1,
            "zigong": 2.3,
            "picdb": 10.4,
        },
    },
    "respiratory_failure_at_24h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.25,
        "n_samples": {
            "mimic": 1099866,
            "ehrshot": 72164,
            "miived": 0,
            "miiv": 396882,
            "eicu": 2199085,
            "hirid": 646056,
            "aumc": 884307,
            "sic": 489607,
            "zigong": 0,
            "picdb": 230158,
        },
        "size": {
            "mimic": 6.4,
            "ehrshot": 0.4,
            "miived": 0.0,
            "miiv": 2.4,
            "eicu": 13.5,
            "hirid": 3.9,
            "aumc": 5.5,
            "sic": 2.7,
            "zigong": 0.0,
            "picdb": 1.4,
        },
    },
    "circulatory_failure_at_8h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.25,
        "n_samples": {
            "mimic": 334339,
            "ehrshot": 14266,
            "miived": 0,
            "miiv": 244304,
            "eicu": 369894,
            "hirid": 685413,
            "aumc": 281161,
            "sic": 1176290,
            "zigong": 2762,
            "picdb": 12573,
        },
        "size": {
            "mimic": 2.0,
            "ehrshot": 0.1,
            "miived": 0.0,
            "miiv": 1.4,
            "eicu": 2.1,
            "hirid": 4.2,
            "aumc": 1.8,
            "sic": 6.9,
            "zigong": 0.0,
            "picdb": 0.1,
        },
    },
    "kidney_failure_at_48h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.15,
        "n_samples": {
            "mimic": 3111492,
            "ehrshot": 62150,
            "miived": 0,
            "miiv": 1759023,
            "eicu": 6007453,
            "hirid": 996732,
            "aumc": 1516864,
            "sic": 1399874,
            "zigong": 0,
            "picdb": 44773,
        },
        "size": {
            "mimic": 18.9,
            "ehrshot": 0.4,
            "miived": 0.0,
            "miiv": 10.5,
            "eicu": 37.6,
            "hirid": 6.3,
            "aumc": 9.5,
            "sic": 8.2,
            "zigong": 0.0,
            "picdb": 0.3,
        },
    },
    "log_creatine_in_1h": {
        "task": "regression",
        "family": "gaussian",
    },
    "log_lactage_in_1h": {
        "task": "regression",
        "family": "gaussian",
    },
}
