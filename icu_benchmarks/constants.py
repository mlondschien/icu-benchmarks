from pathlib import Path

DATA_DIR = Path(__file__).parents[1] / "data"
VARIABLE_REFERENCE_PATH = (
    Path(__file__).parents[1] / "resources" / "variable_reference.tsv"
)


DATASETS = [
    "mimic",
    "ehrshot",
    "miived",
    "miiv",
    "eicu",
    "hirid",
    "aumc",
    "sic",
    "zigong",
    "picdb",
]


OUTCOMES = [
    "remaining_los",
    "mortality_at_24h",
    "los_at_24h",
    "decompensation_at_24h",
    "respiratory_failure_at_24h",
    "circulatory_failure_at_8h",
    "kidney_failure_at_48h",
]

TASKS = {
    "remaining_los": {
        "task": "regression",
        # outcome distribution
        "family": "gamma",
        # alpha such that fit on train split with l1_ratio=1 is zero. This differs a
        # bit by weighting scheme.
        "alpha_max": 0,
        # Total number of samples in all splits
        "n_samples": {
            "mimic": 5179853,
            "ehrshot": 0,
            "miived": 1550213,
            "miiv": 2163733,
            "eicu": 11623907,
            "hirid": 1716120,
            "aumc": 1789927,
            "sic": 1716120,
            "zigong": 367333,
            "picdb": 1614980,
        },
        # Approximate size of the dataset in GB (features + outcome)
        "size": {
            "mimic": 33.3,
            "ehrshot": 0.0,
            "miived": 10.0,
            "miiv": 13.9,
            "eicu": 74.7,
            "hirid": 11.0,
            "aumc": 11.5,
            "sic": 11.0,
            "zigong": 2.4,
            "picdb": 10.4,
        },
    },
    "mortality_at_24h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.07,
        "n_samples": {
            "mimic": 48560,
            "ehrshot": 32740,
            "miived": 11733,
            "miiv": 22747,
            "eicu": 132760,
            "hirid": 16900,
            "aumc": 13133,
            "sic": 19100,
            "zigong": 2380,
            "picdb": 9200,
        },
        "size": {
            "mimic": 0.3,
            "ehrshot": 0.2,
            "miived": 0.1,
            "miiv": 0.1,
            "eicu": 0.9,
            "hirid": 0.1,
            "aumc": 0.1,
            "sic": 0.1,
            "zigong": 0.0,
            "picdb": 0.1,
        },
    },
    "los_at_24h": {
        "task": "regression",
        "family": "gamma",
        "n_samples": {
            "mimic": 48560,
            "ehrshot": 0,
            "miived": 11733,
            "miiv": 22747,
            "eicu": 132760,
            "hirid": 16900,
            "aumc": 13133,
            "sic": 19100,
            "zigong": 2380,
            "picdb": 9200,
        },
        "size": {
            "mimic": 0.3,
            "ehrshot": 0.0,
            "miived": 0.1,
            "miiv": 0.1,
            "eicu": 0.9,
            "hirid": 0.1,
            "aumc": 0.1,
            "sic": 0.1,
            "zigong": 0.0,
            "picdb": 0.1,
        },
    },
    "decompensation_at_24h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.025,
        "n_samples": {
            "mimic": 4020520,
            "ehrshot": 2902373,
            "miived": 1550213,
            "miiv": 1599860,
            "eicu": 11623907,
            "hirid": 1075833,
            "aumc": 1789927,
            "sic": 1254313,
            "zigong": 362853,
            "picdb": 1614980,
        },
        "size": {
            "mimic": 25.8,
            "ehrshot": 18.6,
            "miived": 10.0,
            "miiv": 10.3,
            "eicu": 74.7,
            "hirid": 6.9,
            "aumc": 11.5,
            "sic": 8.1,
            "zigong": 2.3,
            "picdb": 10.4,
        },
    },
    "respiratory_failure_at_24h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.25,
        "n_samples": {
            "mimic": 997507,
            "ehrshot": 70040,
            "miived": 0,
            "miiv": 367053,
            "eicu": 2105320,
            "hirid": 599713,
            "aumc": 854267,
            "sic": 421500,
            "zigong": 0,
            "picdb": 216947,
        },
        "size": {
            "mimic": 6.4,
            "ehrshot": 0.4,
            "miived": 0.0,
            "miiv": 2.4,
            "eicu": 13.5,
            "hirid": 3.9,
            "aumc": 5.5,
            "sic": 2.7,
            "zigong": 0.0,
            "picdb": 1.4,
        },
    },
    "circulatory_failure_at_8h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.25,
        "n_samples": {
            "mimic": 309693,
            "ehrshot": 11453,
            "miived": 0,
            "miiv": 217247,
            "eicu": 331540,
            "hirid": 646907,
            "aumc": 275340,
            "sic": 1072500,
            "zigong": 2633,
            "picdb": 9727,
        },
        "size": {
            "mimic": 2.0,
            "ehrshot": 0.1,
            "miived": 0.0,
            "miiv": 1.4,
            "eicu": 2.1,
            "hirid": 4.2,
            "aumc": 1.8,
            "sic": 6.9,
            "zigong": 0.0,
            "picdb": 0.1,
        },
    },
    "kidney_failure_at_48h": {
        "task": "classification",
        "family": "binomial",
        "alpha_max": 0.15,
        "n_samples": {
            "mimic": 2948173,
            "ehrshot": 60993,
            "miived": 0,
            "miiv": 1628933,
            "eicu": 5857953,
            "hirid": 980813,
            "aumc": 1475073,
            "sic": 1277720,
            "zigong": 0,
            "picdb": 40920,
        },
        "size": {
            "mimic": 18.9,
            "ehrshot": 0.4,
            "miived": 0.0,
            "miiv": 10.5,
            "eicu": 37.6,
            "hirid": 6.3,
            "aumc": 9.5,
            "sic": 8.2,
            "zigong": 0.0,
            "picdb": 0.3,
        },
    },
}
